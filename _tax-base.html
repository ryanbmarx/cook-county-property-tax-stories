{% extends "_base.html" %}

{% macro ad(type, alignment) %}
    {% if alignment %}
        {% set class = "advert--" + alignment%}
    {% endif %}

    {% if type == "cube" %}
        {# <div class="advert {{ class }}" data-ad-type="shrinky-cube"></div> #}
    {% elif type == "leaderboard" %}
        {# <div class="advert" data-ad-type="leaderboard"></div> #}
    {% endif %}
{% endmacro %}

{% macro keep_scrolling_icon() %}
  <div class='story-header__scrolling-icon'>
    <span>{{ scrolling_icon_text }}</span>
    <i class="fa fa-arrow-circle-down fa-2x" aria-hidden="true"></i>
  </div>

{% endmacro %}

{% macro pullquote(quote_text, quote_attribution, quote_attribution_secondary) %}
    
  {% set page_url = 'http://' + ROOT_URL + '/' + PATH %}
    <figure class="trib-pullquote">
        <ul class="social-menu">
            <li>
                <a target="_blank" href="https://twitter.com/share?url={{ page_url }}&text={{ quote_text|urlencode }}">
                    <i class="fa fa-twitter fa-2x" aria-hidden="true"></i>
                    <span class="hidden">Twitter</span>
                </a>
            </li>
            <li>
                <a target="_blank" href="https://www.facebook.com/sharer.php?u={{ page_url }}&t={{ quote_text|urlencode }}">
                    <i class="fa fa-facebook fa-2x" aria-hidden="true"></i>
                    <span class="hidden">Facebook</span>
                </a>
            </li>
        </ul>
        <blockquote>{{ quote_text }}</blockquote>
        {% if quote_attribution %}
            <figcaption>
                {{ quote_attribution|process_text() }}
                {% if quote_attribution_secondary|process_text() %}<span>{{ quote_attribution_secondary|process_text() }}</span>{% endif %}
            </figcaption>
        {% endif %}
    </figure>
    
{% endmacro %}

{% macro add_chart(id, addon_class, url) %}
    {% if addon_class %}
        {% set class = addon_class %}
    {% else %}
        {% set class = "" %}
    {% endif %}
    <div class='chart chart--{{ id }} {{ class }}'>      
        <div id='{{ id }}' class='graphic-embed' data-iframe-url='{{ url }}'></div>
{#          <div class='chart__spinner'>
            <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
            <span class="sr-only">Loading...</span>
        </div> #}
    </div>
{% endmacro %}

{% macro add_video(id, link_base_url, addon_class="") %}

    {% if addon_class %}
        {% set class = addon_class %}
    {% else %}
        {% set class = "" %}
    {% endif %}
    {# Randomstring for an id. #}
    {% set id = id|generate_id %}
    {% set video_player_ref = link_base_url|get_video_ref %}
    
    <div class='video {{ class }}'>
        <object id='{{ id }}' class='BrightcoveExperience'>
          <param name='bgcolor' value='#FFFFFF' />
          <param name='wmode' value='transparent' />
          <param name='autoStart' value='false' />
          <param name='sectionName' value ='/news/watchdog' />
          <param name='contentItemType' value ='embed' />
          <param name='omnitureServer' value='' />
          <param name='omnitureAcct' value='' />
          {# <param name='width' value='500' /> #}
          {# <param name='height' value='300' /> #}
          <param name='playerID' value='3688749019001' />
          <param name='playerKey' value='AQ~~,AAADW0fLtgE~,MIfKkt0NgAvSglhcwVIGmENcE3304kfQ' />
          <param name='adServerURL' value='' />
          <param name='additionalAdTargetingParams' value='' />
          <param name='externalAds' value='true' />
          <param name='linkBaseURL' value='{{ link_base_url }}' />
          <param name='isVid' value='true' />
          <param name='isUI' value='true' />
          <param name='dynamicStreaming' value='true' />
          <param name='showNoContentMessage' value='true' />
          <param name='secureConnections' value='true' />
          <param name='secureHTMLConnections' value='true' />
          <param name='@videoPlayer' value='ref:{{ video_player_ref }}' />
        </object>
    </div>
{% endmacro %}


{% block nav scoped %}
  {% set part = part %}
  {% include '_nav.html' %}
{% endblock nav %}

{% block bodyattrs %}
    {{ super() }}
    {# This data attribute on the body tag will toggle the fixed state of the map and day1 story header  #}
    data-fixed-header=true
{% endblock bodyattrs %}

{% block content %}
  
    {% block story %}
        {# ################ #}
        {# Story content will go here #}
        {# ################ #}
    {% endblock story %}

    {% block methods scoped %}
      {% set part = part %}
      {% include '_subtemplates/_methodologies.html' %}      
    {% endblock methods %}
    {% block credits scoped %}
      {% set part = part %}
      {% include '_subtemplates/_credits.html' %}      
    {% endblock credits %}


{% endblock content %}

{% block library_css %}
    {# <link rel="stylesheet" type="text/css" href="//media.apps.chicagotribune.com/bootstrap/v3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="//media.apps.chicagotribune.com/bootstrap/v3.1.1/css/chicago-bootstrap.css"> #}
    <link rel="stylesheet" type="text/css" href="css/base.css" />
    
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="https://use.fontawesome.com/6745e48e70.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
{% endblock %}

{% block meta %}
    {{ super() }}
{% endblock meta %}

{% block paywall %}
    {# Empty this block out, possibly to be replaced with meter stuff #}
{% endblock%}

{% block scripts %}
    <script src="http://{{ ROOT_URL }}/js/app.min.js"></script>
    <script>brightcove.createExperiences();</script>
{% endblock scripts %}

{% block chartbeat %}
    {% include '_subtemplates/_chartbeat.html' %}
{% endblock %}

{% block omniture_scripts %}
    {{ super() }}
{% endblock omniture_scripts %}


{% block omniture %}
{#     {{ super() }} #}
    {% include '_subtemplates/_omniture.html' %}
{% endblock omniture %}


{% block library_scripts %}
<script type="text/javascript">
  window.ROOT_URL = "{{ ROOT_URL }}";
</script>
<script src="js/vendor.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
{# <script src="//media.apps.chicagotribune.com/bootstrap/v3.1.1/js/bootstrap.min.js"></script> #}
<script src="//media.apps.chicagotribune.com/ads/v2.1.4/ads.min.js"></script>
<script language='JavaScript' type='text/javascript' src='https://sadmin.brightcove.com/js/BrightcoveExperiences.js'></script>
{# <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script> #}
{# <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script> #}
{% endblock %}