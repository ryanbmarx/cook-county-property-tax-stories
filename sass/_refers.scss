// --------------------------------------------
// -------------- REFER ASIDES UNIVERSAL STYLES ----
// --------------------------------------------


.refer{
	padding: 15px;
	background-color: rgba($trib-blue2, .2);
    background-image: url(../img/grid_background.svg);
    background-size: 7px;
    margin: 25px 0;
	// text-align:center;
	position: relative;
	
	&__headline{
		margin:0 0 7px 0;
		text-align:center;
		font-size: 23px;
	}

	&__blurb{
		@include serif-text(15px, 1.5em);
		text-align:center;
	}

	&__button{
		@include sans-serif();
		text-align: center;
		max-width:280px;
		display:block;
		padding:15px 0;
		background:lighten($trib-orange, 5%);
		transition: background-color 150ms ease;
		color:white;
		cursor:pointer;
		margin: 0 auto;

		&:hover, &:focus{
			color:white;
			text-decoration: none;
			background:$trib-orange;			
			transition: background-color 150ms ease;
		}
	}


	&.refer--right{
		text-align:left;
	    max-width: none;
		float:right;
		margin: 25px 0;

		.refer__blurb{
			// @include serif-text(14px, 1.3em);
		}
	}
}

.refer.refer--methods_commercial{
	background-color: rgba($trib-blue2, .05);
    background-image: none;

	border: 1px solid rgba($trib-blue2, .2);
	border-radius: 10px;

	.refer__headline{ font-size: 25px;}
}

// SPecial styles for the data store refer
.refer.refer--datastore{
	background-image:none;
	background-color:transparent;
	box-sizing:border-box;
	border: 1px solid rgba($trib-blue2, .2);
	padding: 25px;

	&:before{
		content:"";
		display:block;
		height: 40px;
		width: 100%;
		background: url(../img/data-store-badge.png) left center no-repeat;
		background-size: contain;
		margin: 0 0 10px 0;
	}

	.refer__blurb{ 
		text-align:left; 
		margin-bottom:0;
	}

	.refer__headline, .refer__button{ display:none;}
}


@media all and (min-width: $tablet-min-width){

// This is a hack to get a diff style. So sorry!

	.refer.refer--steps{
		text-align:left;
		
		margin: 25px 0;
		padding: 25px 0;
		border-top: 1px solid $trib-gray4;
		border-bottom: 1px solid $trib-gray4;

		background:none;


		.refer__headline, .refer__blurb, .refer__button{
			max-width: 60%;

		}

		&:after{
			content: "";
			display:block;
			background: url(../img/step-icon.png) center center no-repeat;
			background-size:contain;
			height: 100%;
			width: 40%;

			position:absolute;
			top: 50%;
			right:0;
			transform: translate(0, -50%);
		}

		.refer__button{
			margin-left: 0;
		}
	}
}

@media all and (min-width: #{$narrow-river-max-width-desktop + 60px}){

	.refer.refer--right{
	    max-width: 210px;
		margin: 3px 0 25px 25px;
	}

	
	.refer__headline{
		font-size: 30px;
    }

	.refer__blurb{
		font-size: 18px;
    }
	
	.refer.refer--steps:after{
		height: 120%;
		width: 50%;
	}
}

@media all and (min-width: $desktop-min-width){
	.refer.refer--right{
    	max-width: 250px;
	}
}